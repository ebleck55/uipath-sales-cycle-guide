<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UiPath Sales Guide - Local Testing Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen">
  <div class="max-w-6xl mx-auto p-6">
    <div class="bg-white rounded-lg shadow-lg p-8 mb-8">
      <h1 class="text-3xl font-bold text-gray-900 mb-4">🧪 UiPath Sales Guide - Local Testing</h1>
      <p class="text-gray-700 mb-6">Test all integrated features of the hardened application with admin functionality.</p>
      
      <!-- Quick Status Check -->
      <div class="bg-blue-50 p-4 rounded-lg mb-8">
        <h3 class="text-lg font-semibold text-blue-900 mb-3">System Status</h3>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
          <div id="status-location" class="text-gray-600">📍 Checking location...</div>
          <div id="status-files" class="text-gray-600">📁 Checking files...</div>
          <div id="status-browser" class="text-gray-600">🌐 Checking browser...</div>
          <div id="status-ready" class="text-gray-600">⏳ Preparing...</div>
        </div>
      </div>
    </div>

    <!-- Main Testing Options -->
    <div class="grid md:grid-cols-2 gap-6 mb-8">
      
      <!-- Primary Testing Link -->
      <div class="bg-gradient-to-br from-blue-500 to-blue-600 p-6 rounded-lg shadow-lg text-white">
        <h2 class="text-2xl font-bold mb-4">🚀 Main Application</h2>
        <p class="mb-4">Test the integrated hardened version with admin panel</p>
        <div class="space-y-3">
          <a href="index-hardened.html" target="_blank" 
             class="block w-full px-4 py-3 bg-white text-blue-600 font-semibold rounded-lg hover:bg-blue-50 text-center transition-colors">
            Launch Hardened App
          </a>
          <a href="index-hardened.html?validate=true" target="_blank"
             class="block w-full px-4 py-3 bg-blue-700 text-white font-semibold rounded-lg hover:bg-blue-800 text-center transition-colors">
            Launch with Validation
          </a>
        </div>
      </div>

      <!-- Comparison Testing -->
      <div class="bg-gradient-to-br from-green-500 to-green-600 p-6 rounded-lg shadow-lg text-white">
        <h2 class="text-2xl font-bold mb-4">🔍 Compare Versions</h2>
        <p class="mb-4">Test both versions side by side</p>
        <div class="space-y-3">
          <a href="index.html" target="_blank"
             class="block w-full px-4 py-3 bg-white text-green-600 font-semibold rounded-lg hover:bg-green-50 text-center transition-colors">
            Original Modular App
          </a>
          <a href="src/admin/admin.html" target="_blank"
             class="block w-full px-4 py-3 bg-green-700 text-white font-semibold rounded-lg hover:bg-green-800 text-center transition-colors">
            Standalone Admin
          </a>
        </div>
      </div>

    </div>

    <!-- Testing Instructions -->
    <div class="bg-white rounded-lg shadow-lg p-8 mb-8">
      <h2 class="text-2xl font-bold text-gray-900 mb-6">📋 Testing Checklist</h2>
      
      <div class="grid md:grid-cols-2 gap-8">
        <!-- Basic Functionality -->
        <div>
          <h3 class="text-lg font-semibold text-gray-800 mb-4">🔧 Basic Functionality</h3>
          <div class="space-y-2 text-sm">
            <label class="flex items-center space-x-2">
              <input type="checkbox" class="test-checkbox">
              <span>App loads without errors</span>
            </label>
            <label class="flex items-center space-x-2">
              <input type="checkbox" class="test-checkbox">
              <span>Industry switcher works (Banking/Insurance)</span>
            </label>
            <label class="flex items-center space-x-2">
              <input type="checkbox" class="test-checkbox">
              <span>Personas section displays correctly</span>
            </label>
            <label class="flex items-center space-x-2">
              <input type="checkbox" class="test-checkbox">
              <span>Sales stages are interactive</span>
            </label>
            <label class="flex items-center space-x-2">
              <input type="checkbox" class="test-checkbox">
              <span>Export notes functionality works</span>
            </label>
          </div>
        </div>

        <!-- Admin Features -->
        <div>
          <h3 class="text-lg font-semibold text-gray-800 mb-4">⚙️ Admin Features</h3>
          <div class="space-y-2 text-sm">
            <label class="flex items-center space-x-2">
              <input type="checkbox" class="test-checkbox">
              <span>"Enter Edit Mode" button toggles admin</span>
            </label>
            <label class="flex items-center space-x-2">
              <input type="checkbox" class="test-checkbox">
              <span>Admin panel opens and closes</span>
            </label>
            <label class="flex items-center space-x-2">
              <input type="checkbox" class="test-checkbox">
              <span>Analytics tab shows metrics</span>
            </label>
            <label class="flex items-center space-x-2">
              <input type="checkbox" class="test-checkbox">
              <span>AI Settings tab loads</span>
            </label>
            <label class="flex items-center space-x-2">
              <input type="checkbox" class="test-checkbox">
              <span>Export analytics works</span>
            </label>
          </div>
        </div>
      </div>
    </div>

    <!-- AI Testing Section -->
    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-8">
      <h3 class="text-lg font-semibold text-yellow-800 mb-4">🤖 AI Features Testing</h3>
      <div class="text-sm text-yellow-700 space-y-2">
        <p><strong>Prerequisites:</strong> You'll need a Claude API key to test AI features</p>
        <ol class="list-decimal ml-6 space-y-1">
          <li>Open the hardened app and enter admin mode</li>
          <li>Click "Admin Panel" → "AI Settings" tab</li>
          <li>Enter your Claude API key and click "Save API Key"</li>
          <li>Click "Test Connection" to verify it works</li>
          <li>Use any AI features in the app to generate prompts</li>
          <li>Check "Analytics" tab to see tracked prompts</li>
        </ol>
      </div>
    </div>

    <!-- Browser Console Testing -->
    <div class="bg-gray-50 rounded-lg p-6 mb-8">
      <h3 class="text-lg font-semibold text-gray-800 mb-4">🖥️ Console Testing</h3>
      <p class="text-sm text-gray-600 mb-4">Open browser developer tools (F12) and run these commands:</p>
      <div class="bg-gray-800 text-green-400 p-4 rounded font-mono text-sm">
        <div class="space-y-1">
          <div><span class="text-gray-500">// Run the validation script</span></div>
          <div>validateIntegration()</div>
          <div class="mt-3"><span class="text-gray-500">// Test analytics manually</span></div>
          <div>analyticsService.trackEvent('test', {data: 'manual test'})</div>
          <div>siteAnalytics.getEvents('all')</div>
          <div class="mt-3"><span class="text-gray-500">// Check global objects</span></div>
          <div>console.log({HardenedApp, aiService, analyticsService})</div>
        </div>
      </div>
    </div>

    <!-- Results Section -->
    <div class="bg-white rounded-lg shadow-lg p-8">
      <h2 class="text-2xl font-bold text-gray-900 mb-6">📊 Test Results</h2>
      <div id="test-results" class="text-gray-600">
        <p>Complete the testing checklist above to track your progress.</p>
        <div class="mt-4">
          <div id="progress-bar" class="w-full bg-gray-200 rounded-full h-2">
            <div id="progress-fill" class="bg-blue-600 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
          </div>
          <p class="text-sm mt-2">Progress: <span id="progress-text">0/10 tests completed</span></p>
        </div>
      </div>
    </div>

  </div>

  <script>
    // Status checks
    document.addEventListener('DOMContentLoaded', function() {
      // Check location
      const isLocalhost = window.location.hostname === 'localhost' || 
                         window.location.hostname === '127.0.0.1' ||
                         window.location.protocol === 'file:';
      
      document.getElementById('status-location').innerHTML = 
        isLocalhost ? '📍 Local environment ✅' : '📍 Remote environment ⚠️';
      
      // Check browser
      const browserInfo = navigator.userAgent.includes('Chrome') ? 'Chrome' :
                         navigator.userAgent.includes('Firefox') ? 'Firefox' :
                         navigator.userAgent.includes('Safari') ? 'Safari' : 'Other';
      
      document.getElementById('status-browser').innerHTML = `🌐 ${browserInfo} ✅`;
      
      // Check files (attempt to check if main files exist)
      fetch('index-hardened.html', {method: 'HEAD'})
        .then(() => {
          document.getElementById('status-files').innerHTML = '📁 Files accessible ✅';
        })
        .catch(() => {
          document.getElementById('status-files').innerHTML = '📁 Files check failed ⚠️';
        });
      
      setTimeout(() => {
        document.getElementById('status-ready').innerHTML = '⚡ Ready to test ✅';
      }, 1000);
    });

    // Progress tracking
    let completedTests = 0;
    const totalTests = 10;

    document.querySelectorAll('.test-checkbox').forEach((checkbox, index) => {
      checkbox.addEventListener('change', function() {
        if (this.checked) {
          completedTests++;
        } else {
          completedTests--;
        }
        
        const percentage = (completedTests / totalTests) * 100;
        document.getElementById('progress-fill').style.width = percentage + '%';
        document.getElementById('progress-text').textContent = 
          `${completedTests}/${totalTests} tests completed`;
        
        if (completedTests === totalTests) {
          document.getElementById('test-results').innerHTML = `
            <div class="text-green-600">
              <p class="text-lg font-semibold">🎉 All tests completed!</p>
              <p>The integration appears to be working correctly.</p>
            </div>
          `;
        }
      });
    });
  </script>
</body>
</html>